# JS 执行机制

- 调用栈
    记录函数的执行顺序，管理执行上下文和变量环境
- 作用域
    变量查找的规则
    当前作用域 -> 父级作用域 -> 全局作用域
- 作用域链
    变量查找的路径
- 执行上下文
    函数调用时创建的上下文（代码执行）环境
- 变量环境
    变量提升
- 词法环境
    TDZ
- 词法作用域   


在每个执行上下文的变量环境中，都包含一个外部应用 outer ，用来指向外部的执行上下文
## 作用域链
- 当一段代码使用一个变量时，JS 引擎会从当前作用域开始查找该变量。
- 如果在当前作用域中找不到该变量，JS 引擎会沿着 outer 指向的外部作用域去查找，直到找到该变量或者到达全局作用域。
- 这个查找过程就是作用域链。

## 词法作用域
作用域由代码中函数声明的位置来决定，静态的
预测代码在执行过程中如何查找变量

词法作用域是代码编译阶段就决定好了的，与函数怎么调用无关。

## 闭包
基础是理解词法作用域等
根据词法作用域的规则，内部函数getName和setName总是可以访问外部函数 foo 中的变量。

根据词法作用域的规则，内部函数总是可以访问外部函数中的变量（自由变量），当通过调用一个外部函数返回一个内部函数后，即使该外部函数已经执行结束了，但是内部函数引用外部函数的变量依然保存在内存中，这些变量的集合就叫做闭包。
foo 外部函数，这些变量的集合称为 foo 函数的闭包。
这些变量的集合也是内部函数运行的专属背包————即闭包。






块级作用域在词法作用域表达
-------------------------------------------------------------------------------
1.js中打印的是全局的

## 打印全局值的原因
在 `foo` 函数里，代码尝试访问 `myname` 变量。不过，`foo` 函数内部并未声明 `myname` 变量。按照词法作用域规则，JavaScript 引擎会从当前作用域开始，逐层向外查找该变量。由于 `foo` 函数内部没有 `myname` 变量，引擎就会在全局作用域中查找，最终找到全局变量 `myname`，其值为 "极客时间"。因此，`foo` 函数打印的是全局变量 `myname` 的值。

### 总结
`foo` 函数打印全局值是因为函数内部没有声明 `myname` 变量，JavaScript 引擎根据词法作用域规则在全局作用域中找到了该变量。


有一个outer属性指向定义是的环境
函数作用域是自己的
往外走作用域链
