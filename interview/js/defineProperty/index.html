<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>响应式</title>
</head>

<body>
  <div id="container"></div>
  <button id="button">点击加1</button>
  <button id="lodinBtn" type="button">登录</button>
  <script>
    /* js dom api
    不利于业务，性能不好
    document.getElementById('button').addEventListener('click',function(){
      var container = document.getElementById('container');
      // 显示类型转换 
      container.innerHTML = parseInt(container.innerHTML) + 1;
    })
    响应式开发 数据状态 它发生改变，数据绑定的地方会自动更新
    MVVM  Model count View #container  VM JSX */

    // 1.状态的创建
    var obj = {
      // 监听状态改变
    }

    // 保存实际值的私有变量
    var _value = 1;
    var _isLogin = false;

    Object.defineProperty(obj, 'value', {
      // 定义 obj 上的value属性 ，有些什么样的操作
      get: function () {
        console.log('读取了value属性');
        return _value;
      },
      // 拦截
      set: function (newVal) {
        console.log('设置了value属性');
        _value = newVal;
        document.getElementById('container').innerHTML = newVal;
      }
    });

    // 一次只能定义一个property
    Object.defineProperty(obj, 'isLogin', {
      get: function () {
        console.log('读取了isLogin属性');
        return _isLogin;
      },
      set: function (newValue) {
        console.log('设置了isLogin属性');
        _isLogin = newValue;
        document.getElementById('lodinBtn').innerHTML = newValue ? '退出' : '登录';
      }
    });

    // 更新视图
    document.getElementById('container').innerHTML = obj.value;

    // 监听按钮点击事件
    document.getElementById('button').addEventListener('click', function () {
      obj.value += 1;
    });

    document.getElementById('lodinBtn').addEventListener('click', function () {
      obj.isLogin = !obj.isLogin;
    });
  </script>
</body>

</html>